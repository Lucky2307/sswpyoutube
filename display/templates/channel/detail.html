{% extends 'base/base.html' %}

{% load my_tags %}
{% block title %}
<title>
    {{selectedChannel.name}}
</title>
{% endblock %}
{% load static %}

{% block customStyle %}
<style>
.text-center {
    text-align: center!important;
    padding-top: 3rem;
    padding-bottom: 3rem;
    margin-bottom: 0;
}
body {
    padding-top: 3rem;
    padding-bottom: 3rem;
    color: #000;
}
.bg-dark {
    background-color: #f93875!important;
}
.card-body {
background-color: rgb(183 183 183 / 20%);
}
.btn-outline-secondary {
    color: #fff;
    border-color: rgba(245, 245, 245, 0.4);
    background-color: #f93875;
}
.page-item.active .page-link {
    z-index: 3;
    color: #fff;
    background-color: #f93875;
    border-color: #f93875;
}
.page-link {
    color: #000000;
}
.text-muted {
    color: #fff!important;
}
.dark-mode {
    background-color: #2f2f2f;
}
body.dark-mode {
  background-color: #181818;
  color:white;
}
.card {
    background-color: rgba(245, 245, 245, 0.4);
    border: 2px solid rgb(0 0 0 / 19%)
}
.btn-primary {
    color: #fff;
    background-color: #f93875;
    border-color: rgba(245, 245, 245, 0.4);
}
@media (min-width: 768px) {
.jumbotron {
  padding-top: 6rem;
  padding-bottom: 6rem;
}
}

.jumbotron p:last-child {
margin-bottom: 0;
}

.jumbotron h1 {
font-weight: 300;
}

.jumbotron .container {
max-width: 40rem;
}

footer {
padding-top: 3rem;
padding-bottom: 3rem;
}

footer p {
margin-bottom: .25rem;
}
/* Switch Specific Style Start */


.toggle_switch{
  width: 100px;
  height: 45px;
  position: relative;
}

input[type="checkbox"].switch_3{
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
  outline: 0;
  z-index: 1;
}

svg.checkbox .outer-ring{
  stroke-dasharray: 375;
  stroke-dashoffset: 375;
  -webkit-animation: resetRing .35s ease-in-out forwards;
          animation: resetRing .35s ease-in-out forwards;
}

input[type="checkbox"].switch_3:checked + svg.checkbox .outer-ring{
  -webkit-animation: animateRing .35s ease-in-out forwards;
          animation: animateRing .35s ease-in-out forwards;
}

input[type="checkbox"].switch_3:checked + svg.checkbox .is_checked{
  opacity: 1;
  -webkit-transform: translateX(0) rotate(0deg);
          transform: translateX(0) rotate(0deg);
}

input[type="checkbox"].switch_3:checked + svg.checkbox .is_unchecked{
  opacity: 0;
  -webkit-transform: translateX(-200%) rotate(180deg);
          transform: translateX(-200%) rotate(180deg);
}


svg.checkbox{
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

svg.checkbox .is_checked{
  opacity: 0;
  fill: white;
  -webkit-transform-origin: 50% 50%;
          transform-origin: 50% 50%;
  -webkit-transform: translateX(200%) rotate(45deg);
          transform: translateX(200%) rotate(45deg);
  -webkit-transition: all .35s;
  transition: all .35s;
}

svg.checkbox .is_unchecked{
  opacity: 1;
  fill: yellow;
  -webkit-transform-origin: 50% 50%;
          transform-origin: 50% 50%;
  -webkit-transform: translateX(0) rotate(0deg);
          transform: translateX(0) rotate(0deg);
  -webkit-transition: all .35s;
  transition: all .35s;
}

@-webkit-keyframes animateRing{
  to{
    stroke-dashoffset: 0;
    stroke: #233043;
  }
}

@keyframes animateRing{
  to{
    stroke-dashoffset: 0;
    stroke: #233043;
  }
}

@-webkit-keyframes resetRing{
  to{
    stroke-dashoffset: 0;
    stroke: #b0aa28;
  }
}

@keyframes resetRing{
  to{
    stroke-dashoffset: 0;
    stroke: #b0aa28;
  }
}

/* Switch Specific Style End */
</style>
{% endblock %}

{% block content %}

<section class="text-center">
  <div class="container">
    <img class="bd-placeholder-img rounded-circle" src="{{ selectedChannel.icon }}" alt="icon" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 140x140">
    <h2>
      {% if selectedChannel.agency %}
      <img class="bd-placeholder-img" src="{{selectedChannel.agency.icon.url}}" alt="icon" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 32x24" style="height: 50px;">
      {% endif %}
      {% for language in selectedChannel.language.all %}
      <img class="bd-placeholder-img" src="{{language.icon.url}}" alt="icon" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 32x24">
      {% endfor %}
    </h2>
    <h2>{{ selectedChannel.name }}</h2>
    <p>
      <a href="https://www.youtube.com/channel/{{ selectedChannel.channelId }}" class="btn btn-outline-secondary my-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16">
        <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.122C.002 7.343.01 6.6.064 5.78l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
      </svg> Go to channel</a>
      {% if user.is_authenticated %}
      <a href="{% url 'channel-update' selectedChannel.channelId %}" class="btn btn-outline-secondary my-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
      </svg> Update</a>
      {% endif %}
    </p>
  </div>
</section>

{% if messages %}
        <div class="py-5 text-center">
          <h2>Info:</h2>
          {% for message in messages %}
          <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
          {% endfor %}
        </div>
{% endif %}
<hr class="mb-4">

  <div class="album py-5">

    {% include 'base/paginator.html' %}

      <div class="container">
  
        <div class="row">
  
          {% for video in page_obj %}
          <div class="col-md-4">
            <div class="mb-4" style="
    border: 2px solid rgb(0 0 0 / 19%);
">
              <a href="https://www.youtube.com/watch?v={{ video.videoId }}">
              <img style="  width: 344px;height: 180px;object-fit: cover;" src="{{ video.thumbnail }}" alt="url">
              </a>
              <a href="https://www.youtube.com/channel/{{ video.channelId.channelId }}">
                 <img src="{{ video.channelId.icon }}" alt="icon" role="img" preserveAspectRatio="xMidYMid slice" focusable="false" style="width: 60px;height: 60px;position: absolute;left: 30px;bottom: 140px;border-radius: 30px;border: 2px solid #000;overflow: hidden;">
              </a>
              <div class="card-body">
                <div style="height: 65px;margin-top: 10px;">
                  <p style="display: -webkit-box;
                  /* webkit only works on a few browsers */
                  -webkit-line-clamp: 2;
                  -webkit-box-orient: vertical;
                  overflow: hidden;">{{ video.title }}</p>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  {% if video.liveBroadcastContent == "live" %}
                  <div class="btn-group">
                    <a href="https://www.youtube.com/watch?v={{ video.videoId }}"><button type="button" class="btn btn-sm btn-outline-danger">Live</button></a>
                  </div>
                  <small class="text">{{video.actualStartTime}}</small>
                  {% elif video.liveBroadcastContent == "upcoming" %}
                  <div class="btn-group">
                    <a href="https://www.youtube.com/watch?v={{ video.videoId }}"><button type="button" class="btn btn-sm btn-outline-info">In {{ video.scheduledStartTime|timeuntil|upto:',' }}</button></a>
                  </div>
                  <small class="text">{{video.scheduledStartTime}}</small>
                  {% else %}
                  <div class="btn-group">
                    <a href="https://www.youtube.com/watch?v={{ video.videoId }}"><button type="button" class="btn btn-sm btn-outline-secondary">
                      {% if video.actualStartTime %}
                      {{ video.actualStartTime|timesince|upto:',' }} ago
                      {% else %}
                      {{ video.publishedAt|timesince|upto:',' }} ago
                      {% endif %}
                    </button></a>
                  </div>
                  <small class="text">
                    {% if video.actualStartTime %}
                      {{ video.actualStartTime }}
                    {% elif video.scheduledStartTime %}
                      {{ video.scheduledStartTime }}
                    {% else %}
                      {{ video.publishedAt }}
                    {% endif %}
                  </small>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
          
        </div>
      </div>
      {% include 'base/paginator.html' %}
    </div>
  {% endblock %}